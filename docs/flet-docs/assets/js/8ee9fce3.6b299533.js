"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[52921],{59119:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var i=t(23766),r=t(74848),s=t(28453),o=t(61096);const a={slug:"user-authentication",title:"User authentication",author:"Feodor Fitsner",author_title:"Flet founder and developer",author_url:"https://github.com/FeodorFitsner",author_image_url:"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4",tags:["release"]},l=void 0,c={authorsImageUrls:[void 0]},d=[{value:"Authentication",id:"authentication",level:2},{value:"Client storage",id:"client-storage",level:2},{value:"Session storage",id:"session-storage",level:2},{value:"Encryption API",id:"encryption-api",level:2},{value:"Other improvements",id:"other-improvements",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.p,{children:"User authentication in Flet is here! \ud83c\udf89"}),"\n",(0,r.jsx)(n.p,{children:'Now you can implement user authentication ("Login with X" buttons) in your Flet app using 3rd-party identity providers such as GitHub, Google, Azure, Auth0, LinkedIn and others:'}),"\n",(0,r.jsx)("img",{src:"/docs/flet-docs/img/docs/getting-started/authentication/github-oauth-authorize.png",className:"screenshot-40"}),"\n",(0,r.jsx)(n.p,{children:"Traditionally, this release is not just about authentication, but it adds a ton of accompanying functionality and small improvements:"}),"\n",(0,r.jsx)(o.A,{toc:d,maxHeadingLevel:2}),"\n",(0,r.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsx)(n.p,{children:"Flet authentication features:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Works with Flet desktop, web and mobile apps."}),"\n",(0,r.jsx)(n.li,{children:"Using multiple authentication providers in one app."}),"\n",(0,r.jsxs)(n.li,{children:["Built-in OAuth providers with automatic user details fetching:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"GitHub"}),"\n",(0,r.jsx)(n.li,{children:"Azure"}),"\n",(0,r.jsx)(n.li,{children:"Google"}),"\n",(0,r.jsx)(n.li,{children:"Auth0"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:"Optional groups fetching."}),"\n",(0,r.jsx)(n.li,{children:"Automatic token refresh."}),"\n",(0,r.jsx)(n.li,{children:'Login with a saved token ("Remember me").'}),"\n",(0,r.jsx)(n.li,{children:"Custom OAuth providers."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:'A simple example on how to add "Login with GitHub" button to your Flet app:'}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import os\n\nimport flet as ft\nfrom flet.auth.providers.github_oauth_provider import GitHubOAuthProvider\n\ndef main(page: ft.Page):\n\n    provider = GitHubOAuthProvider(\n        client_id=os.getenv("GITHUB_CLIENT_ID"),\n        client_secret=os.getenv("GITHUB_CLIENT_SECRET"),\n        redirect_url="http://localhost:8550/api/oauth/redirect",\n    )\n\n    def login_click(e):\n        page.login(provider)\n\n    def on_login(e):\n        print("Access token:", page.auth.token.access_token)\n        print("User ID:", page.auth.user.id)\n\n    page.on_login = on_login\n    page.add(ft.ElevatedButton("Login with GitHub", on_click=login_click))\n\nft.app(target=main, port=8550, view=ft.AppView.WEB_BROWSER)\n'})}),"\n",(0,r.jsxs)(n.admonition,{type:"note",children:[(0,r.jsx)(n.p,{children:"Before running the app set the secret environment variables in a command line:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'$ export GITHUB_CLIENT_ID="<client_id>"\n$ export GITHUB_CLIENT_SECRET="<client_secret>"\n'})})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/cookbook/authentication",children:"Read Authentication guide for more information and examples"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"client-storage",children:"Client storage"}),"\n",(0,r.jsxs)(n.p,{children:["Flet's client storage API that allows storing key-value data on a client side in a persistent storage. Flet implementation uses ",(0,r.jsx)(n.a,{href:"https://pub.dev/packages/shared_preferences",children:(0,r.jsx)(n.code,{children:"shared_preferences"})})," Flutter package."]}),"\n",(0,r.jsx)(n.p,{children:"Writing data to the storage:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'page.client_storage.set("key", "value")\n'})}),"\n",(0,r.jsx)(n.p,{children:"Reading data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'value = page.client_storage.get("key")\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/cookbook/client-storage",children:"Read Client storage guide for more information and examples"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"session-storage",children:"Session storage"}),"\n",(0,r.jsx)(n.p,{children:"Flet introduces an API for storing key-value data in user's session on a server side."}),"\n",(0,r.jsx)(n.p,{children:"Writing data to the session:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'page.session.set("key", "value")\n'})}),"\n",(0,r.jsx)(n.p,{children:"Reading data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'value = page.session.get("key")\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"/docs/cookbook/session-storage",children:"Read Session storage guide for more information and examples"})}),"\n",(0,r.jsx)(n.h2,{id:"encryption-api",children:"Encryption API"}),"\n",(0,r.jsxs)(n.p,{children:["In this release Flet introduces utility methods to encrypt and decrypt sensitive text data using symmetric algorithm (where the same key is used for encryption and decryption). It uses ",(0,r.jsx)(n.a,{href:"https://github.com/fernet/spec/blob/master/Spec.md",children:"Fernet"})," implementation from ",(0,r.jsx)(n.a,{href:"https://pypi.org/project/cryptography/",children:"cryptography"})," package, which is AES 128 with some additional hardening, plus PBKDF2 to derive encryption key from a user passphrase."]}),"\n",(0,r.jsx)(n.p,{children:"Encrypting data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from flet.security import encrypt, decrypt\nsecret_key = "S3CreT!"\nplain_text = "This is a secret message!"\nencrypted_data = encrypt(plain_text, secret_key)\n'})}),"\n",(0,r.jsx)(n.p,{children:"Decrypting data:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'from flet.security import encrypt, decrypt\nsecret_key = "S3CreT!"\nplain_text = decrypt(encrypted_data, secret_key)\nprint(plain_text)\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"/docs/cookbook/encrypting-sensitive-data",children:"Continue reading for more information and examples"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"other-improvements",children:"Other improvements"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["SVG image support (",(0,r.jsx)(n.a,{href:"https://github.com/flet-dev/examples/blob/main/python/controls/image/svg-image.py",children:"example"}),") and new images properties:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/controls/image#color",children:(0,r.jsx)(n.code,{children:"Image.color"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/controls/image#color_blend_mode",children:(0,r.jsx)(n.code,{children:"Image.color_blend_mode"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/controls/image#semantics_label",children:(0,r.jsx)(n.code,{children:"Image.semantics_label"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/controls/image#gapless_playback",children:(0,r.jsx)(n.code,{children:"Image.gapless_playback"})})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"/docs/cookbook/animations#animation-end-callback",children:[(0,r.jsx)(n.code,{children:"on_animation_end"})," callback"]})," to chain animations."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.a,{href:"/docs/controls/container#clip_behavior",children:[(0,r.jsx)(n.code,{children:"Container.clip_behavior"})," property"]}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/controls/page#window_bgcolor",children:(0,r.jsx)(n.code,{children:"page.window_bgcolor"})})," to make cool transparent app window:"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import flet as ft\ndef main(page: ft.Page):\n    page.window_bgcolor = ft.Colors.TRANSPARENT\n    page.bgcolor=ft.Colors.TRANSPARENT\n    page.window_title_bar_hidden = True\n    page.window_frameless = True\n    page.window_left = 400\n    page.window_top = 400\n    page.add(ft.ElevatedButton("I\'m a floating button!"))\nft.app(target=main)\n'})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/controls/page#get_clipboard",children:(0,r.jsx)(n.code,{children:"page.get_clipboard()"})})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"/docs/controls/page#launch_urlurl",children:(0,r.jsx)(n.code,{children:"page.launch_url()"})})," - better control with additional arguments:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"web_window_name"})," - window tab/name to open URL in: ",(0,r.jsx)(n.code,{children:"_self"})," - the same tab, ",(0,r.jsx)(n.code,{children:"_blank"})," - a new tab or ",(0,r.jsx)(n.code,{children:"<your name>"})," - a named tab."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"web_popup_window"})," - set to ",(0,r.jsx)(n.code,{children:"True"})," to display a URL in a browser popup window. Default is ",(0,r.jsx)(n.code,{children:"False"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"window_width"})," - optional, popup window width."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"window_height"})," - optional, popup window height."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/controls/page#window_to_front",children:(0,r.jsx)(n.code,{children:"page.window_to_front()"})})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/controls/page#close_in_app_web_view",children:(0,r.jsx)(n.code,{children:"page.close_in_app_web_view()"})})}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Upgrade Flet module to the latest version (",(0,r.jsx)(n.code,{children:"pip install flet --upgrade"}),"), integrate auth in your app and ",(0,r.jsx)(n.a,{href:"https://discord.gg/dzWXP8SHG8",children:"let us know"})," what you think!"]}),"\n",(0,r.jsx)(n.p,{children:"Enjoy!"})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},61096:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);var i=t(71021);const r={tableOfContentsInline:"tableOfContentsInline_prmo"};var s=t(74848);function o(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:o}=e;return(0,s.jsx)("div",{className:r.tableOfContentsInline,children:(0,s.jsx)(i.A,{toc:n,minHeadingLevel:t,maxHeadingLevel:o,className:"table-of-contents",linkClassName:null})})}},71021:(e,n,t)=>{t.d(n,{A:()=>j});var i=t(98587),r=t(96540),s=t(53115);const o=["parentIndex"];function a(e){const n=e.map((e=>Object.assign({},e,{parentIndex:-1,children:[]}))),t=Array(7).fill(-1);n.forEach(((e,n)=>{const i=t.slice(2,e.level);e.parentIndex=Math.max(...i),t[e.level]=n}));const r=[];return n.forEach((e=>{const{parentIndex:t}=e,s=(0,i.A)(e,o);t>=0?n[t].children.push(s):r.push(s)})),r}function l(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:i}=e;return n.flatMap((e=>{const n=l({toc:e.children,minHeadingLevel:t,maxHeadingLevel:i});return function(e){return e.level>=t&&e.level<=i}(e)?[Object.assign({},e,{children:n})]:n}))}function c(e){const n=e.getBoundingClientRect();return n.top===n.bottom?c(e.parentNode):n}function d(e,n){var t;let{anchorTopOffset:i}=n;const r=e.find((e=>c(e).top>=i));if(r){var s;return function(e){return e.top>0&&e.bottom<window.innerHeight/2}(c(r))?r:null!=(s=e[e.indexOf(r)-1])?s:null}return null!=(t=e[e.length-1])?t:null}function h(){const e=(0,r.useRef)(0),{navbar:{hideOnScroll:n}}=(0,s.p)();return(0,r.useEffect)((()=>{e.current=n?0:document.querySelector(".navbar").clientHeight}),[n]),e}function p(e){const n=(0,r.useRef)(void 0),t=h();(0,r.useEffect)((()=>{if(!e)return()=>{};const{linkClassName:i,linkActiveClassName:r,minHeadingLevel:s,maxHeadingLevel:o}=e;function a(){const e=function(e){return Array.from(document.getElementsByClassName(e))}(i),a=function(e){let{minHeadingLevel:n,maxHeadingLevel:t}=e;const i=[];for(let r=n;r<=t;r+=1)i.push("h"+r+".anchor");return Array.from(document.querySelectorAll(i.join()))}({minHeadingLevel:s,maxHeadingLevel:o}),l=d(a,{anchorTopOffset:t.current}),c=e.find((e=>l&&l.id===function(e){return decodeURIComponent(e.href.substring(e.href.indexOf("#")+1))}(e)));e.forEach((e=>{!function(e,t){t?(n.current&&n.current!==e&&n.current.classList.remove(r),e.classList.add(r),n.current=e):e.classList.remove(r)}(e,e===c)}))}return document.addEventListener("scroll",a),document.addEventListener("resize",a),a(),()=>{document.removeEventListener("scroll",a),document.removeEventListener("resize",a)}}),[e,t])}var u=t(56289),m=t(74848);function g(e){let{toc:n,className:t,linkClassName:i,isChild:r}=e;return n.length?(0,m.jsx)("ul",{className:r?void 0:t,children:n.map((e=>(0,m.jsxs)("li",{children:[(0,m.jsx)(u.A,{to:"#"+e.id,className:null!=i?i:void 0,dangerouslySetInnerHTML:{__html:e.value}}),(0,m.jsx)(g,{isChild:!0,toc:e.children,className:t,linkClassName:i})]},e.id)))}):null}const x=r.memo(g),f=["toc","className","linkClassName","linkActiveClassName","minHeadingLevel","maxHeadingLevel"];function j(e){let{toc:n,className:t="table-of-contents table-of-contents__left-border",linkClassName:o="table-of-contents__link",linkActiveClassName:c,minHeadingLevel:d,maxHeadingLevel:h}=e,u=(0,i.A)(e,f);const g=(0,s.p)(),j=null!=d?d:g.tableOfContents.minHeadingLevel,v=null!=h?h:g.tableOfContents.maxHeadingLevel,_=function(e){let{toc:n,minHeadingLevel:t,maxHeadingLevel:i}=e;return(0,r.useMemo)((()=>l({toc:a(n),minHeadingLevel:t,maxHeadingLevel:i})),[n,t,i])}({toc:n,minHeadingLevel:j,maxHeadingLevel:v});return p((0,r.useMemo)((()=>{if(o&&c)return{linkClassName:o,linkActiveClassName:c,minHeadingLevel:j,maxHeadingLevel:v}}),[o,c,j,v])),(0,m.jsx)(x,Object.assign({toc:_,className:t,linkClassName:o},u))}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},23766:e=>{e.exports=JSON.parse('{"permalink":"/docs/flet-docs/blog/user-authentication","editUrl":"https://github.com/flet-dev/website/edit/main/blog/2022-09-27-user-authentication.md","source":"@site/blog/2022-09-27-user-authentication.md","title":"User authentication","description":"User authentication in Flet is here! \ud83c\udf89","date":"2022-09-27T00:00:00.000Z","tags":[{"inline":true,"label":"release","permalink":"/docs/flet-docs/blog/tags/release"}],"readingTime":2.86,"hasTruncateMarker":false,"authors":[{"name":"Feodor Fitsner","title":"Flet founder and developer","url":"https://github.com/FeodorFitsner","imageURL":"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4","key":null,"page":null}],"frontMatter":{"slug":"user-authentication","title":"User authentication","author":"Feodor Fitsner","author_title":"Flet founder and developer","author_url":"https://github.com/FeodorFitsner","author_image_url":"https://avatars0.githubusercontent.com/u/5041459?s=400&v=4","tags":["release"]},"unlisted":false,"prevItem":{"title":"Gesture detector","permalink":"/docs/flet-docs/blog/gesture-detector"},"nextItem":{"title":"File picker and uploads","permalink":"/docs/flet-docs/blog/file-picker-and-uploads"}}')}}]);