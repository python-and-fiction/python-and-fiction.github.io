"use strict";(self.webpackChunkflet_dev=self.webpackChunkflet_dev||[]).push([[71343],{9238:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>d,metadata:()=>o,toc:()=>u});const o=JSON.parse('{"id":"controls/audio","title":"Audio","description":"A control to simultaneously play multiple audio files. Works on macOS, Linux, Windows, iOS, Android and web.","source":"@site/docs/controls/audio.md","sourceDirName":"controls","slug":"/controls/audio","permalink":"/docs/flet-docs/docs/controls/audio","draft":false,"unlisted":false,"editUrl":"https://github.com/flet-dev/website/edit/main/docs/controls/audio.md","tags":[],"version":"current","frontMatter":{"title":"Audio","sidebar_label":"Audio"},"sidebar":"docs","previous":{"title":"Utility","permalink":"/docs/flet-docs/docs/controls/utility"},"next":{"title":"AudioRecorder","permalink":"/docs/flet-docs/docs/controls/audiorecorder"}}');var t=a(74848),l=a(28453),i=a(65537),s=a(79329);const d={title:"Audio",sidebar_label:"Audio"},r=void 0,c={},u=[{value:"Examples",id:"examples",level:2},{value:"Autoplay audio",id:"autoplay-audio",level:3},{value:"Audio with playback controls",id:"audio-with-playback-controls",level:3},{value:"Properties",id:"properties",level:2},{value:"<code>autoplay</code>",id:"autoplay",level:3},{value:"<code>balance</code>",id:"balance",level:3},{value:"<code>playback_rate</code>",id:"playback_rate",level:3},{value:"<code>release_mode</code>",id:"release_mode",level:3},{value:"<code>src</code>",id:"src",level:3},{value:"<code>src_base64</code>",id:"src_base64",level:3},{value:"<code>volume</code>",id:"volume",level:3},{value:"Methods",id:"methods",level:2},{value:"<code>get_current_position()</code>",id:"get_current_position",level:3},{value:"<code>get_duration()</code>",id:"get_duration",level:3},{value:"<code>pause()</code>",id:"pause",level:3},{value:"<code>play()</code>",id:"play",level:3},{value:"<code>release()</code>",id:"release",level:3},{value:"<code>resume()</code>",id:"resume",level:3},{value:"<code>seek()</code>",id:"seek",level:3},{value:"Events",id:"events",level:2},{value:"<code>on_duration_changed</code>",id:"on_duration_changed",level:3},{value:"<code>on_loaded</code>",id:"on_loaded",level:3},{value:"<code>on_position_changed</code>",id:"on_position_changed",level:3},{value:"<code>on_seek_complete</code>",id:"on_seek_complete",level:3},{value:"<code>on_state_changed</code>",id:"on_state_changed",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["A control to simultaneously play multiple audio files. Works on macOS, Linux, Windows, iOS, Android and web.\nBased on ",(0,t.jsx)(n.a,{href:"https://pub.dev/packages/audioplayers",children:"audioplayers"})," Flutter widget."]}),"\n",(0,t.jsxs)(n.p,{children:["Audio control is non-visual and should be added to ",(0,t.jsx)(n.code,{children:"page.overlay"})," list."]}),"\n",(0,t.jsxs)(n.admonition,{title:"Packaging",type:"info",children:[(0,t.jsxs)(n.p,{children:["To build your Flet app that uses ",(0,t.jsx)(n.code,{children:"Audio"})," control add ",(0,t.jsx)(n.code,{children:"--include-packages flet_audio"})," to ",(0,t.jsx)(n.code,{children:"flet build"})," command, for example:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"flet build apk --include-packages flet_audio\n"})})]}),"\n","\n",(0,t.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://flet-controls-gallery.fly.dev/utility/audio",children:"Live example"})}),"\n",(0,t.jsx)(n.h3,{id:"autoplay-audio",children:"Autoplay audio"}),"\n",(0,t.jsx)(i.A,{groupId:"language",children:(0,t.jsxs)(s.A,{value:"python",label:"Python",default:!0,children:[(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Autoplay works in desktop, mobile apps and Safari browser, but doesn't work in Chrome/Edge."})}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import flet as ft\n\ndef main(page: ft.Page):\n    audio1 = ft.Audio(\n        src="https://luan.xyz/files/audio/ambient_c_motion.mp3", autoplay=True\n    )\n    page.overlay.append(audio1)\n    page.add(\n        ft.Text("This is an app with background audio."),\n        ft.ElevatedButton("Stop playing", on_click=lambda _: audio1.pause()),\n    )\n\nft.app(main)\n'})})]})}),"\n",(0,t.jsx)(n.h3,{id:"audio-with-playback-controls",children:"Audio with playback controls"}),"\n",(0,t.jsx)(i.A,{groupId:"language",children:(0,t.jsx)(s.A,{value:"python",label:"Python",default:!0,children:(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import flet as ft\n\nurl = "https://github.com/mdn/webaudio-examples/blob/main/audio-analyser/viper.mp3?raw=true"\n\ndef main(page: ft.Page):\n    def volume_down(_):\n        audio1.volume -= 0.1\n        audio1.update()\n\n    def volume_up(_):\n        audio1.volume += 0.1\n        audio1.update()\n\n    def balance_left(_):\n        audio1.balance -= 0.1\n        audio1.update()\n\n    def balance_right(_):\n        audio1.balance += 0.1\n        audio1.update()\n\n    audio1 = ft.Audio(\n        src=url,\n        autoplay=False,\n        volume=1,\n        balance=0,\n        on_loaded=lambda _: print("Loaded"),\n        on_duration_changed=lambda e: print("Duration changed:", e.data),\n        on_position_changed=lambda e: print("Position changed:", e.data),\n        on_state_changed=lambda e: print("State changed:", e.data),\n        on_seek_complete=lambda _: print("Seek complete"),\n    )\n    page.overlay.append(audio1)\n    page.add(\n        ft.ElevatedButton("Play", on_click=lambda _: audio1.play()),\n        ft.ElevatedButton("Pause", on_click=lambda _: audio1.pause()),\n        ft.ElevatedButton("Resume", on_click=lambda _: audio1.resume()),\n        ft.ElevatedButton("Release", on_click=lambda _: audio1.release()),\n        ft.ElevatedButton("Seek 2s", on_click=lambda _: audio1.seek(2000)),\n        ft.Row(\n            [\n                ft.ElevatedButton("Volume down", on_click=volume_down),\n                ft.ElevatedButton("Volume up", on_click=volume_up),\n            ]\n        ),\n        ft.Row(\n            [\n                ft.ElevatedButton("Balance left", on_click=balance_left),\n                ft.ElevatedButton("Balance right", on_click=balance_right),\n            ]\n        ),\n        ft.ElevatedButton(\n            "Get duration", on_click=lambda _: print("Duration:", audio1.get_duration())\n        ),\n        ft.ElevatedButton(\n            "Get current position",\n            on_click=lambda _: print("Current position:", audio1.get_current_position()),\n        ),\n    )\n\nft.app(main)\n'})})})}),"\n",(0,t.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,t.jsx)(n.h3,{id:"autoplay",children:(0,t.jsx)(n.code,{children:"autoplay"})}),"\n",(0,t.jsx)(n.p,{children:"Starts playing audio as soon as audio control is added to a page."}),"\n",(0,t.jsxs)(n.p,{children:["Value is of type ",(0,t.jsx)(n.code,{children:"bool"})," and defaults to ",(0,t.jsx)(n.code,{children:"False"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Autoplay works in desktop, mobile apps and Safari browser, but doesn't work in Chrome/Edge."})}),"\n",(0,t.jsx)(n.h3,{id:"balance",children:(0,t.jsx)(n.code,{children:"balance"})}),"\n",(0,t.jsx)(n.p,{children:"Sets the stereo balance."}),"\n",(0,t.jsx)(n.p,{children:"-1 - The left channel is at full volume; the right channel is silent. 1 - The right channel is at full volume; the left channel is silent. 0 - Both channels are at the same volume."}),"\n",(0,t.jsxs)(n.p,{children:["Value is of type ",(0,t.jsx)(n.a,{href:"/docs/reference/types/aliases#optionalnumber",children:(0,t.jsx)(n.code,{children:"OptionalNumber"})}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"Setting balance is supported on Windows and Linux only."})}),"\n",(0,t.jsx)(n.h3,{id:"playback_rate",children:(0,t.jsx)(n.code,{children:"playback_rate"})}),"\n",(0,t.jsx)(n.p,{children:"Sets the playback rate. iOS and macOS have limits between 0.5 and 2x Android SDK version should be 23 or higher."}),"\n",(0,t.jsxs)(n.p,{children:["Value is of type ",(0,t.jsx)(n.a,{href:"/docs/reference/types/aliases#optionalnumber",children:(0,t.jsx)(n.code,{children:"OptionalNumber"})}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"release_mode",children:(0,t.jsx)(n.code,{children:"release_mode"})}),"\n",(0,t.jsx)(n.p,{children:"Sets the release mode."}),"\n",(0,t.jsxs)(n.p,{children:["Value is of type ",(0,t.jsx)(n.a,{href:"/docs/reference/types/releasemode",children:(0,t.jsx)(n.code,{children:"ReleaseMode"})})," and defaults to ",(0,t.jsx)(n.code,{children:"ReleaseMode.RELEASE"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"src",children:(0,t.jsx)(n.code,{children:"src"})}),"\n",(0,t.jsxs)(n.p,{children:["The audio source. Can be a URL or a local ",(0,t.jsx)(n.a,{href:"/docs/cookbook/assets",children:"asset file"}),"."]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.a,{href:"https://github.com/bluefireteam/audioplayers/blob/main/troubleshooting.md#supported-formats--encodings",children:"Here"})," is a list of supported audio formats."]})}),"\n",(0,t.jsx)(n.h3,{id:"src_base64",children:(0,t.jsx)(n.code,{children:"src_base64"})}),"\n",(0,t.jsx)(n.p,{children:"Sets the contents of audio file encoded in base-64 format."}),"\n",(0,t.jsxs)(n.p,{children:["Value is of type ",(0,t.jsx)(n.code,{children:"str"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"volume",children:(0,t.jsx)(n.code,{children:"volume"})}),"\n",(0,t.jsx)(n.p,{children:"Sets the volume (amplitude)."}),"\n",(0,t.jsx)(n.p,{children:"0 is mute and 1 is the max volume. The values between 0 and 1 are linearly interpolated."}),"\n",(0,t.jsxs)(n.p,{children:["Value is of type ",(0,t.jsx)(n.a,{href:"/docs/reference/types/aliases#optionalnumber",children:(0,t.jsx)(n.code,{children:"OptionalNumber"})}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,t.jsx)(n.h3,{id:"get_current_position",children:(0,t.jsx)(n.code,{children:"get_current_position()"})}),"\n",(0,t.jsx)(n.p,{children:"Returns the current position in milliseconds."}),"\n",(0,t.jsx)(n.h3,{id:"get_duration",children:(0,t.jsx)(n.code,{children:"get_duration()"})}),"\n",(0,t.jsx)(n.p,{children:"Returns the duration of audio in milliseconds."}),"\n",(0,t.jsx)(n.h3,{id:"pause",children:(0,t.jsx)(n.code,{children:"pause()"})}),"\n",(0,t.jsx)(n.p,{children:"Stops playing audio."}),"\n",(0,t.jsx)(n.h3,{id:"play",children:(0,t.jsx)(n.code,{children:"play()"})}),"\n",(0,t.jsx)(n.p,{children:"Starts playing audio for the beginning."}),"\n",(0,t.jsx)(n.h3,{id:"release",children:(0,t.jsx)(n.code,{children:"release()"})}),"\n",(0,t.jsxs)(n.p,{children:["Stops playing and releases the resources associated with this audio control.\nThe resources are going to be fetched or buffered again as soon as you call ",(0,t.jsx)(n.code,{children:"resume()"})," or change the source."]}),"\n",(0,t.jsx)(n.h3,{id:"resume",children:(0,t.jsx)(n.code,{children:"resume()"})}),"\n",(0,t.jsx)(n.p,{children:"Resumes playing audio from the current position."}),"\n",(0,t.jsx)(n.h3,{id:"seek",children:(0,t.jsx)(n.code,{children:"seek()"})}),"\n",(0,t.jsx)(n.p,{children:"Moves the cursor to the desired position."}),"\n",(0,t.jsx)(n.p,{children:"Method arguments:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"position_milliseconds"})," - desired position in milliseconds."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,t.jsx)(n.h3,{id:"on_duration_changed",children:(0,t.jsx)(n.code,{children:"on_duration_changed"})}),"\n",(0,t.jsx)(n.p,{children:"Fires as soon as audio duration is available (it might take a while to download or buffer it)."}),"\n",(0,t.jsxs)(n.p,{children:["Event handler argument is of type ",(0,t.jsx)(n.a,{href:"/docs/reference/types/audiodurationchangeevent",children:(0,t.jsx)(n.code,{children:"AudioDurationChangeEvent"})}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"on_loaded",children:(0,t.jsx)(n.code,{children:"on_loaded"})}),"\n",(0,t.jsx)(n.p,{children:"Fires when an audio is loaded/buffered."}),"\n",(0,t.jsx)(n.h3,{id:"on_position_changed",children:(0,t.jsx)(n.code,{children:"on_position_changed"})}),"\n",(0,t.jsx)(n.p,{children:"Fires when audio position is changed. Will continuously update the position of the playback every 1 second if the status is playing. Can be used for a progress bar."}),"\n",(0,t.jsxs)(n.p,{children:["Event handler argument is of type ",(0,t.jsx)(n.a,{href:"/docs/reference/types/audiopositionchangeevent",children:(0,t.jsx)(n.code,{children:"AudioPositionChangeEvent"})}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"on_seek_complete",children:(0,t.jsx)(n.code,{children:"on_seek_complete"})}),"\n",(0,t.jsx)(n.p,{children:"Fires on seek completions. An event is going to be sent as soon as the audio seek is finished."}),"\n",(0,t.jsx)(n.h3,{id:"on_state_changed",children:(0,t.jsx)(n.code,{children:"on_state_changed"})}),"\n",(0,t.jsx)(n.p,{children:"Fires when audio player state changes."}),"\n",(0,t.jsxs)(n.p,{children:["Event handler argument is of type ",(0,t.jsx)(n.a,{href:"/docs/reference/types/audiostatechangeevent",children:(0,t.jsx)(n.code,{children:"AudioStateChangeEvent"})}),"."]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},79329:(e,n,a)=>{a.d(n,{A:()=>i});a(96540);var o=a(18215);const t={tabItem:"tabItem_Ymn6"};var l=a(74848);function i(e){let{children:n,hidden:a,className:i}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,o.A)(t.tabItem,i),hidden:a,children:n})}},65537:(e,n,a)=>{a.d(n,{A:()=>y});var o=a(96540),t=a(18215),l=a(65627),i=a(56347),s=a(50372),d=a(30604),r=a(11861),c=a(78749);function u(e){var n,a;return null!=(n=null==(a=o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:a.filter(Boolean))?n:[]}function h(e){const{values:n,children:a}=e;return(0,o.useMemo)((()=>{const e=null!=n?n:function(e){return u(e).map((e=>{let{props:{value:n,label:a,attributes:o,default:t}}=e;return{value:n,label:a,attributes:o,default:t}}))}(a);return function(e){const n=(0,r.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error('Docusaurus error: Duplicate values "'+n.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[n,a])}function p(e){let{value:n,tabValues:a}=e;return a.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:a}=e;const t=(0,i.W6)(),l=function(e){let{queryString:n=!1,groupId:a}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:a});return[(0,d.aZ)(l),(0,o.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(t.location.search);n.set(l,e),t.replace(Object.assign({},t.location,{search:n.toString()}))}),[l,t])]}function f(e){const{defaultValue:n,queryString:a=!1,groupId:t}=e,l=h(e),[i,d]=(0,o.useState)((()=>function(e){var n;let{defaultValue:a,tabValues:o}=e;if(0===o.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!p({value:a,tabValues:o}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+a+'" but none of its children has the corresponding value. Available values are: '+o.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return a}const t=null!=(n=o.find((e=>e.default)))?n:o[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:l}))),[r,u]=m({queryString:a,groupId:t}),[f,v]=function(e){let{groupId:n}=e;const a=function(e){return e?"docusaurus.tab."+e:null}(n),[t,l]=(0,c.Dv)(a);return[t,(0,o.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:t}),x=(()=>{const e=null!=r?r:f;return p({value:e,tabValues:l})?e:null})();(0,s.A)((()=>{x&&d(x)}),[x]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!p({value:e,tabValues:l}))throw new Error("Can't select invalid tab value="+e);d(e),u(e),v(e)}),[u,v,l]),tabValues:l}}var v=a(9136);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=a(74848);function j(e){let{className:n,block:a,selectedValue:o,selectValue:i,tabValues:s}=e;const d=[],{blockElementScrollPositionUntilNextRender:r}=(0,l.a_)(),c=e=>{const n=e.currentTarget,a=d.indexOf(n),t=s[a].value;t!==o&&(r(n),i(t))},u=e=>{var n;let a=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{var o;const n=d.indexOf(e.currentTarget)+1;a=null!=(o=d[n])?o:d[0];break}case"ArrowLeft":{var t;const n=d.indexOf(e.currentTarget)-1;a=null!=(t=d[n])?t:d[d.length-1];break}}null==(n=a)||n.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":a},n),children:s.map((e=>{let{value:n,label:a,attributes:l}=e;return(0,b.jsx)("li",Object.assign({role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,ref:e=>{d.push(e)},onKeyDown:u,onClick:c},l,{className:(0,t.A)("tabs__item",x.tabItem,null==l?void 0:l.className,{"tabs__item--active":o===n}),children:null!=a?a:n}),n)}))})}function g(e){let{lazy:n,children:a,selectedValue:l}=e;const i=(Array.isArray(a)?a:[a]).filter(Boolean);if(n){const e=i.find((e=>e.props.value===l));return e?(0,o.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==l})))})}function _(e){const n=f(e);return(0,b.jsxs)("div",{className:(0,t.A)("tabs-container",x.tabList),children:[(0,b.jsx)(j,Object.assign({},n,e)),(0,b.jsx)(g,Object.assign({},n,e))]})}function y(e){const n=(0,v.A)();return(0,b.jsx)(_,Object.assign({},e,{children:u(e.children)}),String(n))}},28453:(e,n,a)=>{a.d(n,{R:()=>i,x:()=>s});var o=a(96540);const t={},l=o.createContext(t);function i(e){const n=o.useContext(l);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);